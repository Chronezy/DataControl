{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 40, "column": 0}, "map": {"version":3,"sources":["file:///home/ensi/Projects/Prac/app/api/enrollments/route.ts"],"sourcesContent":["import { neon } from '@neondatabase/serverless'\n\nconst sql = process.env.DATABASE_URL ? neon(process.env.DATABASE_URL) : null\n\nexport async function GET() {\n  try {\n    if (!sql || !process.env.DATABASE_URL) {\n      return Response.json(\n        { error: 'Database not configured. Please add DATABASE_URL environment variable.' },\n        { status: 503 }\n      )\n    }\n\n    const result = await sql`\n      SELECT e.id, s.name as student_name, c.title as course_title, c.code as course_code, \n             e.grade, e.completion_status, e.enrollment_date\n      FROM enrollments e\n      JOIN students s ON e.student_id = s.id\n      JOIN courses c ON e.course_id = c.id\n      ORDER BY e.enrollment_date DESC\n    `\n    return Response.json(result)\n  } catch (error) {\n    console.error('[v0] Enrollments fetch error:', error)\n    return Response.json({ error: 'Failed to fetch enrollments' }, { status: 500 })\n  }\n}\n\nexport async function POST(request: Request) {\n  try {\n    if (!sql || !process.env.DATABASE_URL) {\n      return Response.json(\n        { error: 'Database not configured.' },\n        { status: 503 }\n      )\n    }\n\n    const body = await request.json()\n    const { student_id, course_id, grade, completion_status } = body\n\n    const result = await sql`\n      INSERT INTO enrollments (student_id, course_id, grade, completion_status) \n      VALUES (${student_id}, ${course_id}, ${grade}, ${completion_status}) \n      RETURNING *\n    `\n    return Response.json(result[0], { status: 201 })\n  } catch (error) {\n    console.error('[v0] Enrollment create error:', error)\n    return Response.json({ error: 'Failed to create enrollment' }, { status: 500 })\n  }\n}\n"],"names":[],"mappings":";;;;;;AAAA;;AAEA,MAAM,MAAM,QAAQ,GAAG,CAAC,YAAY,GAAG,IAAA,wKAAI,EAAC,QAAQ,GAAG,CAAC,YAAY,IAAI;AAEjE,eAAe;IACpB,IAAI;QACF,IAAI,CAAC,OAAO,CAAC,QAAQ,GAAG,CAAC,YAAY,EAAE;YACrC,OAAO,SAAS,IAAI,CAClB;gBAAE,OAAO;YAAyE,GAClF;gBAAE,QAAQ;YAAI;QAElB;QAEA,MAAM,SAAS,MAAM,GAAG,CAAC;;;;;;;IAOzB,CAAC;QACD,OAAO,SAAS,IAAI,CAAC;IACvB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,iCAAiC;QAC/C,OAAO,SAAS,IAAI,CAAC;YAAE,OAAO;QAA8B,GAAG;YAAE,QAAQ;QAAI;IAC/E;AACF;AAEO,eAAe,KAAK,OAAgB;IACzC,IAAI;QACF,IAAI,CAAC,OAAO,CAAC,QAAQ,GAAG,CAAC,YAAY,EAAE;YACrC,OAAO,SAAS,IAAI,CAClB;gBAAE,OAAO;YAA2B,GACpC;gBAAE,QAAQ;YAAI;QAElB;QAEA,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,MAAM,EAAE,UAAU,EAAE,SAAS,EAAE,KAAK,EAAE,iBAAiB,EAAE,GAAG;QAE5D,MAAM,SAAS,MAAM,GAAG,CAAC;;cAEf,EAAE,WAAW,EAAE,EAAE,UAAU,EAAE,EAAE,MAAM,EAAE,EAAE,kBAAkB;;IAErE,CAAC;QACD,OAAO,SAAS,IAAI,CAAC,MAAM,CAAC,EAAE,EAAE;YAAE,QAAQ;QAAI;IAChD,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,iCAAiC;QAC/C,OAAO,SAAS,IAAI,CAAC;YAAE,OAAO;QAA8B,GAAG;YAAE,QAAQ;QAAI;IAC/E;AACF"}}]
}